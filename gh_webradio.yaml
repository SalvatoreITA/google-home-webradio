homeassistant:
  customize:
    package.node_anchors:
      customize: &customize
        package: 'Radio Google Version 1.2'
        author: 'Salvatore Lentini'
        reference: ' WebSite: www.domhouse.it - telegram @theturiddu'

input_select:
  stazioni_radio:
    name: '[V1.2] Seleziona Stazione Radio:'
    options:
      - M2O
      - RADIO EMOTIONS
      - DISCORADIO
      - RADIO DEEJAY
      - RTL 102.5
      - KISS KISS
      - RADIO CAPITAL
      - VIRGIN RADIO
      - RMC
      - RDS
      - RADIO ZETA
      - DANCE FLOOR
      - RADIO STUDIO +
      - RADIO ONE DANCE
      - RADIO 101
      - RADIO 105 
      - 105 MAMACITA
      - 105 DANCE 90
      - 105 TRAP
      - 105 MIAMI
    initial: M2O
    icon: mdi:play

  stazioni_loghi:
    options:
      - i.ibb.co/LJwWp6D/M2o-logo.png #M20 
      - i.ibb.co/D4c5PtJ/Radio-Emotions-Logo.jpg # RADIO-EMOTIONS
      - i.ibb.co/rkxQDHL/DISCORADIOLOGO.jpg #DISCORADIO
      - i.ibb.co/dmW11GK/Radio-Deejay-Logo.png #RADIO DEEJAY
      - i.ibb.co/z2fQdK7/RTL-Logo.png # RTL
      - i.ibb.co/PFKCw5r/KISS-KISS-LOGO.png #KISS-KISS
      - i.ibb.co/F0pbjxg/RADIO-CAPITAL-LOGO.png #RADIO-CAPITAL
      - i.ibb.co/gy88Wsd/VIRGIN-RADIO-LOGO.png #VIRGIN RADIO
      - i.ibb.co/bQ2nQwh/RADIO-MONTE-CARLO-LOGO.png # RADIO-MONTE-CARLO
      - i.ibb.co/2Mv6Ggy/RDS-LOGO.png #RDS
      - i.ibb.co/fCvC9Z4/RADIO-ZETA-LOGO.png #RADIO-Z
      - i.ibb.co/VLzqzwh/DANCE-FLOR-ANNI90.png # DANCE FLOOR
      - i.ibb.co/zhVPtNT/RADIO-STUDIO.png # RADIO STUDIO +
      - i.ibb.co/hyGv43M/RADIO-ONE-DANCE.png #RADIO ONE DANCE
      - i.ibb.co/jJ7jPkj/RADIO-101.png #RADIO 101
      - i.ibb.co/DkYXy02/RADIO-105.png #RADIO 105 
      - i.ibb.co/FKd89wd/RADIO-105-MAMACITA.png #105 MAMACITA
      - i.ibb.co/QmW2xCr/RADIO-105-DANCE-90.png #105 DANCE 90
      - i.ibb.co/gW11Pxs/RADIO-105-TRAP.png #105 TRAP
      - i.ibb.co/N66JVWH/RADIO-105-MIAMI.png #105 MIAMI
    initial: i.ibb.co/LJwWp6D/M2o-logo.png
    
  google_speaker:
    name: 'Google Speaker:'
    options: # inserire nella lista sottostante i media player  esempio media_player.salotto dovrÃ  essere inserito solo salotto
      - "salotto"
      - "studio"
      - "camera"
      - "cucina"
      - "cucina_salotto"
      - "google_home_tutti"
    initial: "cucina_salotto"  # media player di default
    icon: mdi:google-home  

script:
 radio:
    sequence:
      - service: media_player.play_media
        data_template:
          entity_id: media_player.{{ states('input_select.google_speaker') }}
          media_content_id: >
            {% if is_state("input_select.stazioni_radio", "M2O") %} http://radiom2o-lh.akamaihd.net/i/RadioM2o_Live_1@42518/master.m3u8
            {% elif is_state("input_select.stazioni_radio", "RADIO EMOTIONS") %} http://icecast.dns-lab.it:8116/;stream.mp3
            {% elif is_state("input_select.stazioni_radio", "DISCORADIO") %} http://icstream.rds.radio/disco
            {% elif is_state("input_select.stazioni_radio", "RADIO DEEJAY") %} http://radiodeejay-lh.akamaihd.net/i/RadioDeejay_Live_1@189857/master.m3u8
            {% elif is_state("input_select.stazioni_radio", "RTL 102.5") %} http://streamingv2.shoutcast.com/rtl-1025
            {% elif is_state("input_select.stazioni_radio", "KISS KISS") %} http://wma08.fluidstream.net:8080/KissKiss.mp3
            {% elif is_state("input_select.stazioni_radio", "RADIO CAPITAL") %} http://radiocapital-lh.akamaihd.net/i/RadioCapital_Live_1@196312/master.m3u8
            {% elif is_state("input_select.stazioni_radio", "VIRGIN RADIO") %} http://icecast.unitedradio.it/Virgin.mp3
            {% elif is_state("input_select.stazioni_radio", "RMC") %} http://edge.radiomontecarlo.net/RMC.mp3
            {% elif is_state("input_select.stazioni_radio", "RDS") %} http://stream1.rds.it:8000/rds64k
            {% elif is_state("input_select.stazioni_radio", "RADIO ZETA") %} http://shoutcast.rtl.it:3030/stream/1/
            {% elif is_state("input_select.stazioni_radio", "DANCE FLOOR") %} http://185.92.223.206:443/live-aac
            {% elif is_state("input_select.stazioni_radio", "RADIO STUDIO +") %} http://ice.studiopiu.net/rete.aac
            {% elif is_state("input_select.stazioni_radio", "RADIO ONE DANCE") %} https://ice10.fluidstream.net/rn1_2.mp3
            {% elif is_state("input_select.stazioni_radio", "RADIO 101") %} http://icecast.unitedradio.it/r101
            {% elif is_state("input_select.stazioni_radio", "RADIO 105") %} https://icecast.unitedradio.it/Radio105.mp3
            {% elif is_state("input_select.stazioni_radio", "105 MAMACITA") %} http://icy.unitedradio.it/105_522.mp3
            {% elif is_state("input_select.stazioni_radio", "105 DANCE 90") %} https://icy.unitedradio.it/105Dance90.mp3
            {% elif is_state("input_select.stazioni_radio", "105 TRAP") %} https://icecast.unitedradio.it/105Trap.mp3
            {% elif is_state("input_select.stazioni_radio", "105 MIAMI") %} https://icy.unitedradio.it/105Miami.mp3
            {% endif %}
          media_content_type: music
          
 stop_radio:
    sequence:
      - service: media_player.media_stop
        data_template:
          entity_id: media_player.{{ states('input_select.google_speaker') }}

camera:      
  - platform: generic
    name: logo-stazione
    still_image_url: https://{{ states('input_select.stazioni_loghi') }}

input_boolean:
  web_radio:
    name: Web Radio
    icon: mdi:radio
    
  avvia_stazioneradio:
    name: Avvia Stazione Radio
    icon: mdi:radio
          
input_number: 
  volume_radio:
    name: Volume
    icon: mdi:volume-high
    min: 0
    max: 1
    step: 0.05
          
automation:

- alias: Livello Volume
  trigger:
  - platform: state
    entity_id: input_number.volume_radio
  action:
    service: media_player.volume_set
    data_template: 
      entity_id: >                                                                         # inserire nella lista sottostante i media player
        {% if is_state("input_select.google_speaker", "salotto") %} media_player.salotto
        {% elif is_state("input_select.google_speaker", "studio") %} media_player.studio
        {% elif is_state("input_select.google_speaker", "camera") %} media_player.camera
        {% elif is_state("input_select.google_speaker", "cucina") %} media_player.cucina
        {% elif is_state("input_select.google_speaker", "cucina_salotto") %} media_player.cucina_salotto
        {% elif is_state("input_select.google_speaker", "google_home_tutti") %} media_player.google_home_tutti
        {% endif %}
      volume_level: '{{  states.input_number.volume_radio.state  }}'     

- alias: Radio On
  trigger:
  - platform: state
    entity_id: input_boolean.web_radio
    to: 'on'
  condition:
  action:
  - service: script.turn_on
    entity_id: script.radio
  - service: media_player.volume_set
    data:
          entity_id: media_player.{{ states('input_select.google_speaker') }}
          volume_level: '{{  states.input_number.volume_radio.state  }}'
 
- alias: Radio OFF
  trigger:
  - platform: state
    entity_id: input_boolean.web_radio
    to: 'off'
  condition:
  action:
  - service: script.turn_on
    entity_id: script.stop_radio
  - delay: '1'  
  - service: media_player.volume_set
    data:
          entity_id: media_player.{{ states('input_select.google_speaker') }}
          volume_level: '1'  #  riporta il volume di google al massimo quando la radio va in off
  - delay: '1'         
  - service: media_player.turn_off
    data_template:
          entity_id: media_player.{{ states('input_select.google_speaker') }}

- alias: Avvia Stazione Radio
  trigger:
  - platform: state
    entity_id: input_boolean.avvia_stazioneradio
    to: 'on'
  condition:
  - condition: and
    conditions:
    - condition: state
      entity_id: input_boolean.web_radio
      state: 'on'
  action:
  - service: script.turn_on
    entity_id: script.radio

- alias: Auto Off Pulsante
  trigger:
    platform: state
    entity_id: input_boolean.avvia_stazioneradio
    to: 'on'
    for:
      seconds: 2
  action:
  - data: {}
    entity_id: input_boolean.avvia_stazioneradio
    service: input_boolean.turn_off

- alias: M2O LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: M2O
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/LJwWp6D/M2o-logo.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on

- alias: RADIO-EMOTIONS LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO EMOTIONS
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/D4c5PtJ/Radio-Emotions-Logo.jpg
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on

- alias: DISCORADIO LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: DISCORADIO
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/rkxQDHL/DISCORADIOLOGO.jpg
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RADIO DEEJAY LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO DEEJAY
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/dmW11GK/Radio-Deejay-Logo.png
         
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RTL 102.5 LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RTL 102.5
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/z2fQdK7/RTL-Logo.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: KISS KISS LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: KISS KISS
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/PFKCw5r/KISS-KISS-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RADIO CAPITAL LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO CAPITAL
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/F0pbjxg/RADIO-CAPITAL-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: VIRGIN RADIO LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: VIRGIN RADIO
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/gy88Wsd/VIRGIN-RADIO-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RMC LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RMC
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/bQ2nQwh/RADIO-MONTE-CARLO-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RDS LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RDS
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/2Mv6Ggy/RDS-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RADIO ZETA LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO ZETA
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/fCvC9Z4/RADIO-ZETA-LOGO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: RADIO DANCE FLOOR LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: DANCE FLOOR 
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/VLzqzwh/DANCE-FLOR-ANNI90.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: RADIO STUDIO + LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO STUDIO +
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/zhVPtNT/RADIO-STUDIO.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: RADIO ONE DANCE LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO ONE DANCE
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/hyGv43M/RADIO-ONE-DANCE.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: RADIO 101 LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO 101
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/jJ7jPkj/RADIO-101.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: RADIO 105 LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: RADIO 105
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/DkYXy02/RADIO-105.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
          
- alias: 105 MAMACITA LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: 105 MAMACITA
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/FKd89wd/RADIO-105-MAMACITA.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: 105 DANCE 90 LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: 105 DANCE 90
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/QmW2xCr/RADIO-105-DANCE-90.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: 105 TRAP LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: 105 TRAP
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/gW11Pxs/RADIO-105-TRAP.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on
        
- alias: 105 MIAMI LOGO
  description: ''
  trigger:
  - platform: state
    entity_id: input_select.stazioni_radio
    to: 105 MIAMI
  condition: []
  action:
      - service: input_select.select_option
        data:
          entity_id: input_select.stazioni_loghi
          option: i.ibb.co/N66JVWH/RADIO-105-MIAMI.png
          
      - data: {}
        entity_id: input_boolean.avvia_stazioneradio
        service: input_boolean.turn_on